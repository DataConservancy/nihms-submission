language: java
sudo: required
cache:
  directories:
  - $HOME/.m2

# - this is the default value assigned by Travis, but included for clarity
install: mvn install -DskipTests=true -Dmaven.javadoc.skip=true -B -V
script:
  - sudo service mysql stop
  - sudo service postgresql stop
  - sudo service acpid stop
  - sudo service atd stop
  - sudo service cron stop
  - sudo service memcached stop
  - sudo service ntp stop
  - sudo service rabbitmq-server stop
  - sudo service resolvconf stop
  - sudo service sshguard stop
  - sudo service ssh stop
  - sudo ifconfig -a
  - mvn verify -DtrimStackTrace=false -Ddocker.keepRunning
jdk:
  - oraclejdk8
after_failure:
  - docker exec `docker ps|awk '{print $1}'|grep -v CONTAINER` cat /var/log/pure-ftpd/pureftpd.log
  - cd nihms-integration && mvn docker:stop
after_success:
  - cd nihms-integration && mvn docker:stop
